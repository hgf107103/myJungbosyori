<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>신기술동향 문제풀이</title>
    <script src="jquery-3.5.1.min.js"></script>
    <script src="questList.js"></script>
    <style>
        @font-face {
            font-family: 'DXgothic';
            src: url(DX경필고딕B.ttf) format('truetype');
        }

        *{
            font-family: "DXgothic";
            margin: 0px 0px;
            padding: 0px 0px;
        }
        *:focus {
            outline: none;
        }
        body {
            margin-bottom: 80px;
        }
        header {
            width: 80%;
            text-align: center;
            margin: 40px auto;
            transition: all ease 1s;
        }
        header label {
            font-size: 30px;
            transition: all ease 1s;
        }
        header input {
            text-align: center;
            width: 10%;
            cursor: default;
            padding: 5px 20px;
            font-size: 25px;
            border: none;
            border-right: 2px solid rgb(230,230,230);
            border-bottom: 2px solid rgb(230,230,230);
            transition: all ease 1s;
        }
        header input:hover {
            border-right: 2px solid rgb(100,100,100);
            border-bottom: 2px solid rgb(100,100,100);
            transition: all ease 1s;
        }
        div {
            margin: auto;
            width: 50%;
            line-height: 40px;
            font-size: 30px;
            cursor: default;
        }
        div#questBox {
            margin: 30px auto;
            border: 1px solid black;
            border-radius: 20px;
            padding: 80px 80px;
            text-align: center;
            transition: all ease 1s;
        }
        div#questBox h1{
            font-size: 33px;
        }
        div#questBox h2{
            font-size: 25px;
        }



        div#answerBox{
            padding: 20px 30px;
        }
        div input {
            display: block;
            margin: 5px auto;
        }
        div input[type=text] {
            text-align: center;
            padding: 10px 50px;
            width: 55%;
            font-size: 25px;
            border: none;
            border-bottom: 2px solid rgb(200,200,200);
            
            transition: all ease 1s;
        }
        div input[type=text]:hover {
            border-bottom: 2px solid rgb(150,150,150);
            transition: all ease 0.5s;
        }
        div input[type=text]:focus {
            border-bottom: 2px solid red;
            transition: all ease 1s;
        }
        div input[type=button] {
            text-align: center;
            margin-top: 15px;
            padding: 10px 30px;
            width: 35%;
            font-size: 23px;
            border: 1px solid rgb(150,150,150);
            border-radius: 5px;
            background-color: rgb(250,250,250);
            cursor: pointer;
            transition: all ease 0.5s;
        }
        div input[type=button]:hover {
            border: 1px solid black;
            transition: all ease 0.5s;
        }
        div span {
            color: red;
        }
        input#theme {
            padding: 10px 15px;
            position: fixed;
            font-size: 22px;
            top: 5px;
            right: 5px;
            border: 1px solid rgb(150,150,150);
            border-radius: 5px;
            background-color: rgb(250,250,250);
            cursor: pointer;
            transition: all ease 0.5s;
        }
        input#theme:hover {
            border: 1px solid black;
            transition: all ease 0.5s;
        }
    </style>
    <script>
        let lapCnt = 1;
        let sayAnswerCnt = 0;
        let correctAnswerRate = 0;
        let listCnt = 1;
        let list;
        let sayChance = 10;
        let wrongList = new Array;

        function count() {//카운터 표시하는 함수
            $("#lap").val(lapCnt);
            $("#sayAnswer").val(sayAnswerCnt);
            if (sayAnswerCnt >= 1) {
                $("#correctAnswer").val(`${Math.floor((correctAnswerRate / sayAnswerCnt) * 100)}%`);
            }
        }
        function start() {//문제풀이 시작함수
            alert("시작합니다.");
            list = getList();
            shuffle(list);
            $("#questBox").text(list[0].quest);
            document.getElementById("startBtn").style.display = "none";
            document.getElementById("sayBtn").style.display = "block";
            document.getElementById("myAnswer").style.display = "block";
            count();
        }
        function sayAnswerFunction() {//문제 답 날렸을떄 반응
            if (($("#myAnswer").val() == list[listCnt - 1].korAnswer || $("#myAnswer").val() == list[listCnt - 1].engAnswer || $("#myAnswer").val() == list[listCnt - 1].engFullname) && $("#myAnswer").val() != "") {
               
                $("#myAnswer").val('');
                correctAnswerRate++;
                document.getElementById("sayBtn").style.display = "none";
                seeAnswerFunction();
                return;

            } else if (($("#myAnswer").val().toUpperCase() == list[listCnt - 1].korAnswer.toUpperCase() || $("#myAnswer").val().toUpperCase() == list[listCnt - 1].engAnswer.toUpperCase() || $("#myAnswer").val().toUpperCase() == list[listCnt - 1].engFullname.toUpperCase()) && $("#myAnswer").val() != "") {

                $("#myAnswer").val('');
                correctAnswerRate++;
                document.getElementById("sayBtn").style.display = "none";
                seeAnswerFunction();
                return;

            } else if ($("#myAnswer").val() != list[listCnt - 1].korAnswer || $("#myAnswer").val() != list[listCnt - 1].engAnswer || $("#myAnswer").val() != list[listCnt - 1].engFullname || $("#myAnswer").val() == "") {
                
                sayChance--;
                alert(`틀렸습니다.`);
                $("#myAnswer").val('');
                $("#sayBtn").val(`남은기회 ${sayChance}회`);
                if (sayChance == 0) {
                    wrongList.push(listCnt - 1);
                    $("#sayBtn").val(`답맞추기`);
                    seeAnswerFunction();
                    return;
                }
            }

            document.getElementById("seeBtn").style.display = "block";
            
        }

        function seeAnswerFunction() {//해답 보여주기 함수
            $("#questBox").html(`${list[listCnt - 1].quest}<br><br>정답<br>한글 <span>${list[listCnt - 1].korAnswer}</span><br>영(약) <span>${list[listCnt - 1].engAnswer}</span><br>영(풀) <span>${list[listCnt - 1].engFullname}</span>`);
            document.getElementById("sayBtn").style.display = "none";
            document.getElementById("seeBtn").style.display = "none";
            document.getElementById("myAnswer").style.display = "none";
            sayChance = 10;

            if (listCnt == list.length) {//모든 문제를 다 풀었을때
                document.getElementById("newBtn").style.display = "block";
                if (Array.isArray(wrongList) && wrongList.length <= 0) {
                    $("#questBox").html(`${list.length} 문제를 다 풀었습니다.<br>틀린 문제가 없습니다.<br><br>${$("#questBox").html()}`);
                    document.getElementById("reStartBtn").style.display = "none";
                } else if (Array.isArray(wrongList) && wrongList.length > 0) {
                    $("#questBox").html(`${list.length} 문제를 다 풀었습니다.<br>틀린 문제 : ${wrongList.length}문제<br><br>${$("#questBox").html()}`);
                    document.getElementById("reStartBtn").style.display = "block";
                }
                document.getElementById("myAnswer").style.display = "none";
                return;
            }

            document.getElementById("nextBtn").style.display = "block";
            
        }


        function nextAnswerFunction() {//다음문제 함수
            sayAnswerCnt++
            listCnt++;
            $("#questBox").text(list[listCnt - 1].quest);

            document.getElementById("nextBtn").style.display = "none";
            document.getElementById("sayBtn").style.display = "block";
            document.getElementById("myAnswer").style.display = "block";
            count();
        }


        function newAnswerFunction() {//새로 시작하는 함수
            lapCnt++;
            count();
            list = getList();
            shuffle(list);
            listCnt = 0;
            document.getElementById("newBtn").style.display = "none";
            document.getElementById("myAnswer").style.display = "block";
            nextAnswerFunction();
        }




        function reQuestStartFunction() {
            let temp = new Array;
            
            $.each(wrongList, (index, item) => {
                temp.push(list[item]);
            })
            list = temp;
            wrongList = [];

            lapCnt++;
            count();
            shuffle(list);
            listCnt = 0;
            document.getElementById("newBtn").style.display = "none";
            document.getElementById("myAnswer").style.display = "block";
            document.getElementById("reStartBtn").style.display = "none";
            nextAnswerFunction();
        }


        function enterkey() {
            if (window.event.keyCode == 13) {
                if (document.getElementById("sayBtn").style.display == 'block') {
                    sayAnswerFunction();
                }
            }
        }
    </script>
</head>
<body>
    <header>
        <label>현재 회차 <input class="headerInput" type="text" name="lap" id="lap" readonly value="0"></label>
        <label>　푼 문제 <input class="headerInput" type="text" name="sayAnswer" id="sayAnswer" readonly value="0"></label>
        <label>　정답률 <input class="headerInput" type="text" name="correctAnswer" id="correctAnswer" readonly value="0%"></label>
    </header>
    <div id="questBox">
        <h1 style="color: red;">정보처리 산업기사 신기술 동향 문제풀이</h1>
        <br>
        <h2>모든 문제는 10번의 답 제출 기회가 주어집니다.</h2>
        <h2>문제를 모두 푼 후에 오답만을 모아 다시 풀 수 있습니다.</h2>
        <h2>정답이 맞는데도 불구하고 오답이라고 나오는 경우는 띄어쓰기가 틀린 것입니다.</h2>
        <br>
        <h2>지문은 길벗 출판사의 시나공 정보처리산업기사의 신기술동향 페이지를 참고했습니다.</h2>
        <h2>저는 이 페이지로 금전적 이득을 취하려는 생각이 전혀 없음을 미리 밝히는 바입니다.</h2>
        <h2>시험을 준비하시는 모든 분들에게 도움이 되었으면 하는 것이 저의 바램입니다.</h2>
        <br>
        <h2>문제풀이에 있어 오류가 발생한 경우 hgf107103@gmail.com으로 연락바랍니다.</h2>
    </div>
    <div id="answerBox">
        <input type="text" onkeyup="enterkey()" name="myAnswer" id="myAnswer" style="display: none;" placeholder="한글 및 영어 약자, 영어 풀네임으로 적어주십시오">
        <input type="button" class="answerBtnClass" onclick="start()" id="startBtn" style="display: block;" value="시작하기">
        <input type="button" class="answerBtnClass" onclick="sayAnswerFunction()" id="sayBtn" style="display: none;" value="답맞추기">
        <input type="button" class="answerBtnClass" onclick="let check = confirm('해답을 보시겠습니까?'); if(check == true) { wrongList.push(listCnt - 1); seeAnswerFunction();}" id="seeBtn" style="display: none;" value="해답보기">
        <input type="button" class="answerBtnClass" onclick="nextAnswerFunction()" id="nextBtn" style="display: none;" value="다음문제">
        <input type="button" class="answerBtnClass" onclick="newAnswerFunction()" id="newBtn" style="display: none;" value="처음부터">
        <input type="button" class="answerBtnClass" onclick="reQuestStartFunction()" id="reStartBtn" style="display: none;" value="오답풀기">
    </div>
    <script>
        function themeChange() {
            try {
                if ($("#theme").val() == "블랙테마") {
                    $("body").css("background-color", "black");

                    $("label").css("color", "white");

                    $("#questBox").css("border", "1px solid white");
                    $("#questBox").css("color", "white");

                    $(".headerInput").css("background-color", "rgb(30,30,30)");
                    $(".headerInput").css("color", "white");

                    $(".answerBtnClass").css("background-color", "rgb(30,30,30)");
                    $(".answerBtnClass").css("color", "white");

                    $("#myAnswer").css("background-color", "black");
                    $("#myAnswer").css("color", "white");

                    $("#theme").val("화이트테마");

                    return;
                } else if ($("#theme").val() == "화이트테마") {

                    $("body").css("background-color", "white");

                    $("label").css("color", "black");

                    $("#questBox").css("border", "1px solid black");
                    $("#questBox").css("color", "black");

                    $(".headerInput").css("background-color", "white");
                    $(".headerInput").css("color", "black");

                    $(".answerBtnClass").css("background-color", "rgb(250,250,250)");
                    $(".answerBtnClass").css("color", "black");

                    $("#myAnswer").css("background-color", "white");
                    $("#myAnswer").css("color", "black");

                    $("#theme").val("블랙테마");

                    return;
                }
            alert('테마를 변경할 수 없습니다.');
            } catch (error) {
                console.log("테마 변경 : 원인을 알 수 없는 에러 발생 - " + error);
            }
            
        }
    </script>
    <input id="theme" type="button" onclick="themeChange()" value="블랙테마">
</body>
</html>